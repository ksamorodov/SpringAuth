<div *ngIf="currentUser">
    <h1>Hi, {{currentUser.firstName}}!</h1>
    <p>You're logged</p>
    <h3>All registered users:</h3>
    <ul *ngIf="currentUser.role === 'ADMIN'">
        <li *ngFor="let user of users">
            <a *ngIf="user.role === 'ADMIN'" class="text-warning"> {{user.username}} ({{user.lastName}}{{' '}}{{user.firstName}}) </a>
            <a *ngIf="user.role === 'USER' && currentUser.blockedAt == null" class="user"> {{user.username}} ({{user.lastName}}{{' '}}{{user.firstName}}) </a>
            <a *ngIf="user.role === 'USER' && currentUser.blockedAt != null" class="blocked-user"> {{user.username}} ({{user.lastName}}{{' '}}{{user.firstName}}) </a>
            -
            <a *ngIf="user.role === 'USER' && user.blockedAt != null" class="text-danger"> (BLOCKED) {{" | "}}</a>
            <a (click)="deleteUser(user.id)" class="text-danger">Delete {{" | "}}</a>
            <a *ngIf="user.role === 'USER' && user.blockedAt == null" (click)="blockUser(user.id)" class="text-danger">Block {{" | "}}</a>
            <a *ngIf="user.role === 'USER' && user.blockedAt != null" (click)="unblockUser(user.id)" class="text-danger">Unblock {{" | "}}</a>
            <a (click)="changePassword(user.id)" class="text-danger">Change password</a>
        </li>
    </ul>

    <a (click)="changePassword(currentUser.id)" class="text-danger">Change password</a>

    <form *ngIf="isPasswordChangerOpened" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label for="password">Password</label>
            <input type="password" formControlName="password" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.password.errors }" />
            <div *ngIf="submitted && (f.password.errors || !hasDuplicateSymbols(f.password.value))" class="invalid-feedback">
                <!--            <div *ngIf="f.password.errors.required">Password is required</div>-->
                <!--            <div *ngIf="hasDuplicateSymbols(f.password.value)">Password has duplicated symbols</div>-->
                <div *ngIf="true">Password has duplicated symbols</div>
            </div>
        </div>
        <!--    <a>Enable password validator {{" "}}</a>-->
        <!--    <input type="checkbox" checked="{{setPasswordValidation()}}" />-->
        <div class="form-group">
            <button [disabled]="loading || !hasDuplicateSymbols" class="btn btn-primary">
                <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                Change password
            </button>
            <a routerLink="/login" class="btn btn-link">Cancel</a>
        </div>
    </form>

</div>
